{"version":3,"sources":["pagination.directive.js"],"names":[],"mappings":"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","file":"pagination.directive-compiled.js","sourcesContent":["export function PaginationDirective($location) {\n  'ngInject';\n\n  let directive = {\n    restrict: 'E',\n    scope: {\n      'count': '=',\n      'take': '=',\n      'activate': '&',\n      'maxSize': '=?',\n      'hideArrows': '=?'\n    },\n    template: template,\n    link: function(scope, element) {\n      var activate = scope.activate();\n      var queryPage = $location.search().page;\n      var current = queryPage ? parseInt(queryPage) : 1;\n      var pagesCount;\n\n      activate(current, scope.take);\n\n      scope.$watchGroup(['take', 'count', 'maxSize', 'hideArrows'], rebuild);\n      scope.isCurrent = isCurrent;\n      scope.isDisabled = isDisabled;\n      scope.pages = [];\n      scope.toPage = toPage;\n\n      scope.$on('$locationChangeSuccess', locationChanged);\n\n      function isCurrent(page) {\n        return page.value === current;\n      }\n\n      function isDisabled(page) {\n        return page.type === 'separator'\n          || (page.type === 'prev' && current === 1)\n          || (page.type === 'next' && current === pagesCount);\n      }\n\n      function toPage(page) {\n        if (page.value === current || page.type === 'separator') return;\n\n\n        if (page.type === 'page') {\n          current = page.value;\n        }\n        else if (page.type === 'prev') {\n          if (current > 1) current--;\n          else return;\n        }\n        else if (page.type === 'next') {\n          if (current < pagesCount) current++;\n          else return;\n        }\n\n        activate(current, scope.take);\n        rebuild();\n      }\n\n      function rebuild() {\n        var options = buildOptions();\n        var pages = calc(options);\n\n        if (!pages) {\n          scope.pages = [];\n          return;\n        }\n\n        pagesCount = pages.count;\n        scope.pages = generate(pages, options);\n        $location.search('page', current);\n      }\n\n      function locationChanged() {\n        var page = parseInt($location.search().page);\n        if (!page) return;\n\n        scope.toPage({ type: 'page', value: page });\n      }\n\n      function buildOptions() {\n        var options = {\n          count: scope.count,\n          take: scope.take,\n          maxSize: 11,\n          current: current,\n          hideArrows: scope.hideArrows\n        };\n\n        if (scope.maxSize) {\n          if (scope.maxSize < 7) options.maxSize = 7;\n          else options.maxSize = scope.maxSize;\n        }\n\n        return options;\n      }\n\n      function calc(options) {\n        var pages = { };\n\n        pages.count = Math.ceil(options.count / options.take);\n\n        if (!pages.count || pages.count === 1) return;\n\n        if (options.maxSize % 2 === 0) {\n          pages.cellsLeft = options.maxSize / 2 - 1;\n          pages.cellsRight = options.maxSize / 2;\n        }\n        else {\n          pages.cellsLeft = (options.maxSize - 1) / 2;\n          pages.cellsRight = (options.maxSize - 1) / 2;\n        }\n\n        if (!options.hideArrows) {\n          pages.cellsLeft--;\n          pages.cellsRight--;\n        }\n\n        if (options.current > pages.cellsLeft + 1) pages.cellsLeft--;\n        if (options.current > pages.cellsLeft + 1) pages.cellsLeft--;\n        if (options.current < pages.count - pages.cellsRight) pages.cellsRight--;\n        if (options.current < pages.count - pages.cellsRight) pages.cellsRight--;\n\n        pages.lo = options.current - pages.cellsLeft;\n        pages.hi = options.current + pages.cellsRight;\n\n        if (pages.lo < 1)\n        {\n          pages.hi += 1 - pages.lo;\n          pages.lo = 1;\n        }\n\n        if (pages.hi > pages.count)\n        {\n          pages.lo -= pages.hi - pages.count;\n          pages.hi = pages.count;\n        }\n\n        return pages;\n      }\n\n      function generate(pages, options) {\n        var list;\n\n        if (pages.count <= options.maxSize) list = generateFlat(pages);\n        else list = generateFull(pages);\n\n        if (!options.hideArrows) {\n          list.unshift({ type: 'prev', value: '<' });\n          list.push({ type: 'next', value: '>' });\n        }\n\n        return list;\n      }\n\n      function generateFlat(pages) {\n        var list = [];\n\n        for (var i = 1; i <= pages.count; i++) {\n          list.push({ type: 'page', value: i });\n        }\n\n        return list;\n      }\n\n      function generateFull(pages) {\n        var list = [];\n\n        if (pages.lo > 1) list.push({ type: 'page', value: 1 });\n        if (pages.lo > 2) list.push({ type: 'separator', value: '...' });\n\n        for (var i = pages.lo; i <= pages.hi ; i++)\n        {\n          if (i <= 0 || i > pages.count) continue;\n          list.push({ type: 'page', value: i })\n        }\n\n        if (pages.hi < pages.count - 1) {\n          list.push({ type: 'separator', value: '...' })\n        }\n\n        if (pages.hi < pages.count) {\n          list.push({ type: 'page', value: pages.count });\n        }\n\n        return list;\n      }\n    }\n  };\n\n  return directive;\n\n  function template() {\n    return '<div class=\"pagination\">'\n      + '<div class=\"page\"'\n      + 'ng-repeat=\"page in pages\"'\n      + 'ng-class=\"{ \\'active\\': isCurrent(page), \\'disabled\\': isDisabled(page) }\"'\n      + 'ng-click=\"toPage(page)\">'\n      + '{{ page.value }}'\n      + '</div>'\n      + '</div>';\n  }\n}\n\n\n\n\n\n"]}